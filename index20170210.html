<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>GETTING STARTED WITH BRACKETS</title>
        <meta name="description" content="An interactive getting started guide for Brackets.">
        <link rel="stylesheet" href="main.css">
        <script src="https://d3js.org/d3.v3.min.js"></script>
    </head>
    <body>


    <svg1 width="600" height="500">

    </svg1>

    <script>
        d3.json("invoice-taipei.json", function (dataSet) {
            var svg1 = d3.select("svg1");
            var count = 0;
            for (var i = 0; i < dataSet.length; i++) {
                if (dataSet[i].date === "2016/8/1" && dataSet[i].cid === "A" && +dataSet[i].amount > 1000000000) {                    d3.select("svg")
                            .append("rect")
                            .attr({
                                x: 200,
                                y: 10 + 12 * count,
                                width: dataSet[i].amount / 100000000,
                                height: 10,
                                fill: "red"
                            });
                    d3.select("svg1")
                            .append("text")
                            .attr({
                                x: 0,
                                y: 16 + 12 * count,
                                "font-size": 10
                            }).text(dataSet[i].industry);
                    count++;
                }

            }
        });
    </script>


    <hr>

    <svg width="700" height="300">

    </svg>


    <input type="button" value="Click" onclick="update()">

    <input type="button" value="Remove" onclick="update_del()">


    <script>
        d3.json("invoice2016.json", function(dataSet){
            var svg = d3.select("svg");
            var count = 0;
            for(var i=0; i<dataSet.length; i++){
                if(???){
                    d3.select("svg")
                            .append("rect")
                            .attr({
                                        x: 100,
                                        y: 10+12*count,
                                        width: ???/100000000,
                                    height: 10,
                            fill: "red"
                });
                    d3.select("svg")
                            .append("text")
                            .attr({
                                x: 0,
                                y: 16+12*count,
                                "font-size": 5
                            }).text(???);
                    count=???;
                }

            }
        });
    </script>

    <hr>

<script>

    var arr = [85, 60, 99, 49, 77, 82];

    bind(arr);
    render();

    function svg(){

    }

    function bind(dateSet){


// 1 ----------------------------------------------
        var selection =  d3.select("body")
                .selectAll("div")
                .data(dateSet);

// 2 -----------------------------------------
        selection.enter()
                .append("div")

// 3 ------------------------------------------
        selection.exit().remove();


    }
    function render(){
        d3.selectAll("div").text(function(d, i){
            return i+":"+d;
        }).style({
            color: function(d){
                if(d<70){
                    return "red";
                } else {
                    return "black";
                }
            }
        })
    }






    /*
     selection.text(function(d){
     return d;
     });


     // 2 ---------------------------


     .text(function(d){
     return d;
     });


     // 3 ---------------------------




     //.append("div")

     //.datum(arr[i])





     console.log(d3.selectAll("div"));

     */





</script>





<hr>





        
       
        
<script>
    
    var arr = [85, 60, 99, 49, 77, 82];
    var w = 900;
    var h = 300;
    var padding = 100;
    
    svg();
    bind(arr);
    bind_t(arr);
    render();
    render_t();
    
    function svg(){
        d3.select("body").append("svg").attr({
            width: w,
            height: h
        })
    }
    
    function bind(dateSet){
        
// 1 ----------------------------------------------        
        var selection =  d3.select("svg")
                        .selectAll("rect")
                        .data(dateSet);
        
// 2 -----------------------------------------
        selection.enter()
        .append("rect")
        
// 3 ------------------------------------------    
        selection.exit().remove();
    
        
    }
    
    function bind_t(dateSet){
        
      
        var selection =  d3.select("svg")
                        .selectAll("text")
                        .data(dateSet);
        
// 2 -----------------------------------------
        selection.enter()
        .append("text");
        
// 3 ------------------------------------------    
        selection.exit().remove();
    
        
    }
    
    
    
    
    
    
    function render(){
        d3.selectAll("rect").attr({
            x: function(d,i) {
                return padding + 42 * i;
            },
            y: function(d){
                return h-padding-d;
            },                    
            width: 40,
            height: function(d){
                return d;
            },
            fill: function(d){
                if(d<70){
                    return "red";
                } else {
                    return "lightgreen";
                }
            }
            
        })
    }
    
    
    function render_t(){
        d3.selectAll("text").attr({
            x: function(d,i) {
                return padding + 42 * i + 10;
            },
            y: function(d){
                return h-padding+20;
            },                    
            "font-size": 18
        }).text(function(d){
            return d;
        })
    }
    
    function update() {
        var num = random(40, 100);
        arr.push(num);
        bind(arr);
        bind_t(arr);
        render();
        render_t();
        
            
        
    }
    
    
    
    function update_del() {
        
        arr.shift();
        bind(arr);
        bind_t(arr);
        render();
        render_t();
        
            
        
    }
    
    
    
    
    
    
    
    
    function random(N,M){
        return Math.ceil(Math.random()*(M-N)+N);
    }
    
    
    
    
    
    
    
    
    
    
    
    
/*
    function render(){
        d3.selectAll("rect").text(function(d, i){
            return i+":"+d;
        }).style({
            color: function(d){
                if(d<70){
                    return "red";
                } else {
                    return "black";
                }
            }
        })
    }

*/  
    
    
    

    
    /* 
    selection.text(function(d){
        return d;
    });
    
    
// 2 ---------------------------    
    
        
        .text(function(d){
            return d;
        });
    
    
// 3 ---------------------------
    
    


//.append("div")

//.datum(arr[i])





console.log(d3.selectAll("div"));
       
*/
       
       
</script>
        
        
</body>
</html>
            
            
            

